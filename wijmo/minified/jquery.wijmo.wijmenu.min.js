/*
 *
 * Wijmo Library 2.3.4
 * http://wijmo.com/
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * licensing@wijmo.com
 * http://wijmo.com/widgets/license/
 *
 **/
(function(a){"use strict";var b="wijmo-wijmenu-item";a.widget("wijmo.wijmenu",{options:{trigger:"",triggerEvent:"click",position:{},animation:{animated:"slide",duration:400,easing:null},showAnimation:{},hideAnimation:{animated:"fade",duration:400,easing:null},showDelay:400,hideDelay:400,slidingAnimation:{duration:400,easing:null},mode:"flyout",superPanelOptions:null,checkable:false,orientation:"horizontal",direction:"ltr",maxHeight:200,backLink:true,backLinkText:"Back",topLinkText:"All",crumbDefaultText:"Choose an option",select:null,focus:null,blur:null,showing:null,shown:null,hidding:null,hidden:null,items:null},_preventEvent:function(a){a.preventDefault();a.stopImmediatePropagation()},_initState:function(){var a=this;if(!a.options.items)a.options.items=[]},_create:function(){var b=this,f=b.options,h=f.direction,c=f.mode,g,d=b.element,i,e=a.ui.keyCode,j=f.disabled;b._initState();if(window.wijmoApplyWijTouchUtilEvents)a=window.wijmoApplyWijTouchUtilEvents(a);d.is(":hidden")&&d.wijAddVisibilityObserver&&d.wijAddVisibilityObserver(function(){b.refresh();d.wijRemoveVisibilityObserver&&d.wijRemoveVisibilityObserver()},"wijmenu");d.data("wijmomenu",b.widgetName);b.clickNameSpace="click.wijmenudoc"+b._newId();d.hide();b.cssPre="wijmo-wijmenu";b.nowIndex=9999;b.activeItem=null;b.refresh();d.attr("tabIndex",0);if(b._getDisabled()){b.disable();if(f.disabledState===true)f.disabled=j}d.bind("keydown.wijmenuEvent",function(d){if(b._getDisabled())return;c==="sliding"&&b._getSublist().stop(true,true);var j=b.activeItem,k,m,l=f.orientation;if(j){k=j._isRoot();i=j._getSublist()}else k=true;switch(d.keyCode){case e.PAGE_UP:b.previousPage(d);b._preventEvent(d);break;case e.PAGE_DOWN:b.nextPage(d);b._preventEvent(d);break;case e.UP:if(l==="vertical"||c==="sliding"||!k){b.previous(d);b._preventEvent(d)}break;case e.DOWN:if(l==="vertical"||c==="sliding"||!k){b.next(d);b._preventEvent(d)}else if(j)if(c==="flyout"&&a.wijmo.wijmenu._hasVisibleSubMenus(j)>0)i.is(":hidden")&&j._showFlyoutSubmenu(d,function(){b.activate(d,j._getFirstSelectableSubItem())});break;case e.RIGHT:if(l==="horizontal"&&k&&c==="flyout"){if(h==="rtl")b.previous(d);else b.next(d);b._preventEvent(d)}else if(j){g=j.getParent();if(h==="rtl")b._keyDownToCloseSubmenu(c,d,g);else b._keyDownToOpenSubmenu(j,c,d,i)}break;case e.LEFT:if(l==="horizontal"&&k&&c==="flyout"){if(h==="rtl")b.next(d);else b.previous(d);b._preventEvent(d)}else{if(j)g=j.getParent();if(h==="rtl")b._keyDownToOpenSubmenu(j,c,d,i);else b._keyDownToCloseSubmenu(c,d,g)}break;case e.ENTER:if(!j)return;m=j._getLink();if(c==="flyout")break;else{b.select();m.is("a")&&m.attr("href")==="#"&&b._preventEvent(d)}break;case e.TAB:b.next(d);b._preventEvent(d)}})},_keyDownToOpenSubmenu:function(b,e,d,c){var f=this;if(e==="flyout"&&a.wijmo.wijmenu._hasVisibleSubMenus(b)>0)c.is(":hidden")&&b._showFlyoutSubmenu(d,function(){f.activate(d,b._getFirstSelectableSubItem())});else if(e==="sliding")c.length>0&&b._getLink().trigger("click",b._getFirstSelectableSubItem())},_keyDownToCloseSubmenu:function(f,e,c){var b=this,g=b.options,d;if(f==="flyout"){if(c){c._hideCurrentSubmenu(e);b.activate(e,c)}}else{g.backLink&&b._backLink&&b._backLink.is(":visible")&&b._backLink.trigger("click",function(){c&&b.activate(e,c)});d=a(".wijmo-wijmenu-breadcrumb",b.domObject.menucontainer).find("li a");d.length>0&&d.eq(d.length-2).trigger("click",function(){c&&b.activate(e,c)})}},_createMenuItems:function(){for(var b=this,d=[],f=b.options.items.length,g=b._getSublist().children("li").length,c,e=0;e<f-g;e++)b._getSublist().append("<li>");a(">li",b._getSublist()).each(function(e){var g=a(this),f=a.wijmo.wijmenu._getMenuItemOptions(b.options,e);c=b._createItemWidget(g,f);d.push(c);b.options.items[e]=c.options});return d},_itemWidgetName:"wijmenuitem",_createItemWidget:function(c,d){var b=this._itemWidgetName;a.fn[b]&&c[b](d);return a.wijmo.wijmenu._getItemWidget(c)},_handleDisabledOption:function(b,c){var a=this;if(b){if(!a.disabledDiv)a.disabledDiv=a._createDisabledDiv(c);a.disabledDiv.appendTo(a.domObject.menucontainer)}else if(a.disabledDiv){a.disabledDiv.remove();a.disabledDiv=null}},_getDisabled:function(){var b=this,a=b.options;return a.disabledState===true||a.disabled===true},_createDisabledDiv:function(){return a("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:"100%",height:"100%",left:0,top:0})},_innerDestroy:function(){var a=this,b=a.options;a.destroying=true;a[b.mode==="flyout"?"_killFlyout":"_killDrilldown"]();a._killMenuItems();a._killtrigger();a._killElement();a.destroying=false},destroy:function(){var b=this;this._innerDestroy();if(b.disabledDiv){b.disabledDiv.remove();b.disabledDiv=null}a.Widget.prototype.destroy.apply(this)},activate:function(i,e){if(!e)return;var b=this,h=b.domObject.scrollcontainer,c,d,g=false,f=true;c=(e.jquery?e:e.element).eq(0);if(b.activeItem&&b.activeItem.element.get(0)===c.get(0))return;b.deactivate(i);b.activeItem=a.wijmo.wijmenu._getItemWidget(c);d=c.children(":first");b._trigger("focus",i,{item:b.activeItem});if(b.options.mode==="sliding"){f=c.parent().is(".wijmo-wijmenu-current");g=f&&b._hasScroll()&&h.wijsuperpanel("needToScroll",c);if(g){b._linkContainer.link=d;b._linkContainer.needToFocus=true;h.wijsuperpanel("scrollChildIntoView",c)}}d.addClass("ui-state-focus").end();b.element.removeAttr("aria-activedescendant");b.element.attr("aria-activedescendant",c.attr("id"));f&&!g&&d.is("a")&&d.focus()},deactivate:function(){var a=this,b=a.activeItem;if(!b)return;setTimeout(function(){b._getLink().removeClass("ui-state-focus").removeAttr("id");a._trigger("blur")},0);a.activeItem=null},next:function(a){this._move("next",function(a){return a._getFirstSelectableSubItem()},a)},previous:function(a){this._move("previous",function(a){return a._getLastSelectableSubItem()},a)},first:function(){var b=this,c,d,a;if(!b.activeItem)return false;c=b._getActiveItemElement();d=b.activeItem._getParentOrMenu();a=d._getFirstSelectableSubItem();return a&&c[0]===a.element[0]},last:function(){var b=this,c,d,a;if(!b.activeItem)return false;c=b._getActiveItemElement();d=b.activeItem._getParentOrMenu();a=d._getLastSelectableSubItem();return a&&c[0]===a.element[0]},nextPage:function(g){var b=this,e=b._getActiveItemElement(),i,h,c,d,f;if(e)d=b.activeItem._getParentOrMenu();else{d=b;e=b._getFirstSelectableSubItem()}if(b.options.mode==="sliding"&&b._hasScroll()){if(!e||b.last()){b.activate(g,d._getFirstSelectableSubItem());return}i=e.offset().top;h=b.options.maxHeight;c=a.wijmo.wijmenu._getSelectableSubItems(d,function(e){var b=a(e.element),d=h-(b.offset().top-i+b.height()),c=b.height();return d<c&&d>-c});if(!c.length)c=d._getLastSelectableSubItem();else c=c[c.length-1];b.activate(g,c)}else{if(!e||b.last())f=d._getFirstSelectableSubItem();else f=d._getLastSelectableSubItem();b.activate(g,f)}},previousPage:function(g){var b=this,e=b._getActiveItemElement(),i,h,d,c,f;if(e)c=b.activeItem._getParentOrMenu();else{c=b;e=b._getFirstSelectableSubItem()}if(b.options.mode==="sliding"&&b._hasScroll()){if(!e||b.first()){b.activate(g,c._getLastSelectableSubItem());return}i=e.offset().top;h=b.options.maxHeight;d=a.wijmo.wijmenu._getSelectableSubItems(c,function(e){var b=a(e.element),d=b.offset().top-i+h-b.height(),c=b.height();return d<c&&d>-c});if(!d.length)d=c._getFirstSelectableSubItem();else d=d[0];b.activate(g,d)}else{if(!e||b.first())f=c._getLastSelectableSubItem();else f=c._getFirstSelectableSubItem();b.activate(g,f)}},select:function(d){var b=this,a=b.activeItem,c;b._trigger("select",d,{item:a});if(b.options.checkable){c=!a.options.selected;a._setOption("selected",c)}},_getActiveItemElement:function(){return this.activeItem?this.activeItem.element:null},setItemDisabled:function(d,b){var c=a(d,this.element);c.find(".wijmo-wijmenu-item>a").attr("disabled",b);c.find(">a").toggleClass("ui-state-disabled",b)},_setOption:function(b,c){var a=this;if(a.destroying)return;a["_set_"+b]&&a["_set_"+b](c);a.options[b]=c;b==="disabled"&&a._handleDisabledOption(c,a.domObject.menucontainer)},_set_items:function(b){var a=this;a._getSublist().children().remove();a.options.items=b;a.refresh()},_set_mode:function(b){var a=this;a._innerDestroy();a.options.mode=b;a.refresh()},_set_backLink:function(d){var b=this,c;this.options.backLink=d;if(b.options.mode==="sliding"){b._killDrilldown();b._drilldown();c=a(".wijmo-wijmenu-breadcrumb",b.domObject.menucontainer);b._resetDrilldownMenu(c)}},_set_direction:function(){var a=this;a._innerDestroy();a.refresh()},_set_orientation:function(e){var b=this,d=b.domObject.menucontainer,i=b.options.direction,c="ui-icon-triangle-1-",f=i==="rtl"?"w":"e",h=e==="horizontal"?f:"s",g=e==="horizontal"?"s":f;d.removeClass(b.cssPre+"-vertical "+b.cssPre+"-horizontal");if(b.options.mode==="flyout"){d.addClass(b.cssPre+"-"+e);a.each(b.getItems(),function(b,a){if(a.getItems().length===0)return;a._getLink().find("."+c+h).removeClass(c+h+" "+c+g).addClass(c+g)})}else d.addClass(b.cssPre+"-vertical")},_getTriggerEle:function(){return a.wijmo.wijmenu._getOuterElement(this.options.trigger,".wijmo-wijmenu")},_set_triggerEvent:function(d){var a=this,c=a.options,b=a._getTriggerEle();a._killtrigger();c.triggerEvent=d;b.length>0&&a._initTrigger(b);if(c.mode==="flyout"){a._killFlyout();a._flyout()}},_set_trigger:function(d){var a=this,c=a.options,b;a._killtrigger();c.trigger=d;b=a._getTriggerEle();b.length>0&&a._initTrigger(b);if(c.mode==="flyout"){a._killFlyout();a._flyout()}},_initTrigger:function(b){var f=this.options,e=f.triggerEvent,c=this,g=c.domObject.menucontainer,d=".wijmenuEvent";if(b.is("iframe"))b=a(b.get(0).contentWindow.document);switch(e){case"click":b.bind(e+d,function(a){f.mode!=="popup"&&c._displayMenu(a);a.stopPropagation()});break;case"mouseenter":b.bind(e+d,function(a){c._displayMenu(a);a.stopPropagation()});break;case"dblclick":b.bind(e+d,function(a){c._displayMenu(a);a.stopPropagation()});break;case"rtclick":b.bind("contextmenu"+d,function(a){g.hide();c._displayMenu(a);a.preventDefault();a.stopPropagation()})}},_killtrigger:function(){var c=this.options,b;if(c.trigger!==""){b=a(c.trigger);if(b.is("iframe"))b=a(b.get(0).contentWindow.document);b&&b.length>0&&b.unbind(".wijmenuEvent").unbind("wijmenuEvent")}},_move:function(i,g,e){var b=this,c=b._getActiveItemElement(),f,h,d;if(!c||!c.length){b.activate(e,g(b));return}d=a.wijmo.wijmenu._getItemWidget(c);f=d[i]();h=d._getParentOrMenu();if(f)b.activate(e,f);else b.activate(e,g(h))},refresh:function(){var b=this,d=b.element,h="wijmo-wijmenu",c=b.options,k=c.direction,f,e,j,g,i;b.domObject&&b._innerDestroy();if(d.is("ul")){b._rootMenu=d;f=d.wrap("<div></div>").parent();e=f.wrap("<div></div>").parent()}else if(d.is("div")){b._rootMenu=a("ul:first",d);f=d;e=d.wrap("<div></div>").parent()}else return;k==="rtl"&&b._rootMenu.addClass(h+"-rtl");f.addClass("scrollcontainer checkablesupport");e.addClass("ui-widget ui-widget-header "+h+" ui-corner-all ui-helper-clearfix").attr("aria-activedescendant","ui-active-menuitem");c.orientation==="horizontal"&&c.mode==="flyout"&&e.addClass(h+"-"+c.orientation);j={scrollcontainer:f,menucontainer:e};b.domObject=j;b._getSublist().data("topmenu",true);!b._getSublist().hasClass(h+"-list ui-helper-reset")&&b._getSublist().addClass(h+"-list ui-helper-reset");b._items=b._createMenuItems();d.show();d.delegate("li>.wijmo-wijmenu-link","mouseenter.wijmenuEvent",function(){var c=a(this).hasClass("ui-state-disabled");if(b._getDisabled()||c)return;a(this).addClass("ui-state-hover")}).delegate("li>.wijmo-wijmenu-link","mouseleave.wijmenuEvent",function(){var c=a(this).hasClass("ui-state-disabled");if(b._getDisabled()||c)return;a(this).removeClass("ui-state-hover");a(this).data("subMenuOpened")&&a(this).addClass("ui-state-active")});this[c.mode==="flyout"?"_flyout":"_drilldown"]();if(c.trigger!==""){g=b._getTriggerEle();if(g.length>0){e.hide();b._initTrigger(g)}}a(document).bind(b.clickNameSpace,function(d){if(a(d.target).parent().is(".wijmo-wijmenu-all-lists"))return;if(a(d.target).closest(c.trigger).is(c.trigger))return;var f=a(d.target).closest(".wijmo-wijmenu");if(f.length===0){if(c.mode==="sliding"){i=a(".wijmo-wijmenu-breadcrumb",e);if(c.trigger==="")return;b._resetDrilldownMenu(i)}else if(c.mode==="flyout"&&c.triggerEvent!=="mouseenter"){b._hideAllMenus(d);return}g&&g.length>0&&b._hideMenu(d)}})},_flyout:function(){var b=this,c=b.domObject.menucontainer,d=b.options;c.attr("role","menu");d.orientation==="horizontal"&&c.attr("role","menubar");a.each(b.getItems(),function(){this._flyout()})},_hideAllMenus:function(f){var b=this,e,d,c=function(b){if(b.getItems().length>0){a.each(b.getItems(),function(b,a){c(a)});b._hideSubmenu(false,f)}};a.each(b._items,function(b,a){c(a)});if(b.options.trigger!==""){e=b.domObject.menucontainer;if(e.data("isAnimated"))return;d=b._getTriggerEle();if(d.length===0)return;b._hideMenu(f)}},hideAllMenus:function(a){this._hideAllMenus(a)},_killFlyout:function(){a.each(this.getItems(),function(){this._killFlyout()})},_killElement:function(){var b=this,c=b._getSublist();c.removeClass("wijmo-wijmenu-list ui-helper-reset wijmo-wijmenu-content ui-helper-clearfix");a(document).unbind(b.clickNameSpace);if(b.element.is("ul"))b.element.unwrap().unwrap();else b.element.unwrap();b.domObject=null;b.element.removeData("topmenu").removeData("firstLeftValue").removeData("domObject");c.undelegate(".wijmenuEvent")},_killMenuItems:function(){for(var c=this,b=c.getItems(),a=b.length-1;a>=0;a--)b[a].destroy(true);c._items.length=0},_sroll:function(){var a=this.domObject.scrollcontainer,b=this.options.superPanelOptions||{};a.height(this.options.maxHeight);a.wijsuperpanel(b)},_initScrollCallback:function(){var a=this,b=a.domObject.scrollcontainer;a._linkContainer={link:null,needToFocus:false};b.wijsuperpanel({scrolled:function(){var b=a._linkContainer.link;if(a._linkContainer.needToFocus&&b&&b.is("a")){b.focus();a._linkContainer.needToFocus=false}}})},_resetScroll:function(f){var c=this,d=c._rootMenu.parent(),e=5,a=c.domObject.scrollcontainer,b=f._getSublist();d.height(b.height());a.wijsuperpanel("option","hScroller",{scrollValue:0});a.wijsuperpanel("option","vScroller",{scrollValue:0});a.wijsuperpanel("paintPanel");if(c._hasScroll()){if(b.prev().length>0)e=b.prev().css("padding-left").replace(/px/g,"");b.width(a.find(".wijmo-wijsuperpanel-contentwrapper:first").width()-e);d.height(b.height());a.wijsuperpanel("paintPanel")}},_hasScroll:function(){var a=this.domObject.scrollcontainer;return a.data("wijsuperpanel").vNeedScrollBar},_resetDrillChildMenu:function(a){a.removeClass("wijmo-wijmenu-scroll wijmo-wijmenu-current").height("auto")},_resetDrilldownMenu:function(i,e){var b=this,g=b.options,f=b._getSublist(),c=b.domObject.menucontainer,h=a('<li class="wijmo-wijmenu-breadcrumb-text">'+g.crumbDefaultText+"</li>"),d=function(c){a.each(c,function(f,e){var c=e._getSublist(),a=e.getItems();c.hide();b._resetDrillChildMenu(c);a.length>0&&d(a)})};a(".wijmo-wijmenu-current",c).removeClass("wijmo-wijmenu-current");f.animate({left:0},g.showDuration,function(){d(b.getItems());f.addClass("wijmo-wijmenu-current");e&&e()});a(".wijmo-wijmenu-all-lists",c).find("span").remove();i.empty().append(h);a(".wijmo-wijmenu-footer",c).empty().hide();b._resetScroll(b)},_drilldown:function(){var b=this,e=b._getSublist(),d=b.domObject.menucontainer.attr("role","menu"),g,c=b.options,i=c.direction,f=a('<ul class="wijmo-wijmenu-breadcrumb ui-state-default ui-corner-all ui-helper-clearfix"></ul>'),k=a('<li class="wijmo-wijmenu-breadcrumb-text">'+c.crumbDefaultText+"</li>"),n=c.backLink?c.backLinkText:c.topLinkText,l=c.backLink?"wijmo-wijmenu-prev-list":"wijmo-wijmenu-all-lists",j=c.backLink?"ui-state-default ui-corner-all":"",m=c.backLink?'<span class="ui-icon ui-icon-triangle-1-w"></span>':"",h=a('<li class="'+l+'"><a href="#" class="'+j+'">'+m+n+"</a></li>");e.wrap("<div>").parent().css("position","relative");d.addClass("wijmo-wijmenu-ipod wijmo-wijmenu-container");if(c.backLink)f.addClass("wijmo-wijmenu-footer").appendTo(d).hide();else f.addClass("wijmo-wijmenu-header").prependTo(d);!c.backLink&&f.append(k);g=d.width();e.addClass("wijmo-wijmenu-content wijmo-wijmenu-current ui-widget-content ui-helper-clearfix").css({width:g});a.each(b.getItems(),function(b,a){a._setDrilldownUlStyle()});b._sroll();b._initScrollCallback();b._resetScroll(b);b.element.data("firstLeftValue",parseFloat(e.css("left")));e.delegate("li>.wijmo-wijmenu-link","click",function(j,u){var t=a(this).parent(),v=t.attr("disabled"),p,q,m,s,o,n,k,l,r,g=a.wijmo.wijmenu._getItemWidget(t);if(b._getDisabled()||v)return;e.stop(true,true);r=a.wijmo.wijmenu._hasVisibleSubMenus(g);if(!r){b._leafNodeClick(j,g,f);return}p=g._getSublist();if(p.hasClass("wijmo-wijmenu-current"))return;if(!b._trigger("showing",j,g))return;q=g._getParentOrMenu()._getSublist();m=q.data("topmenu")?0:parseFloat(e.css("left"));if(i==="rtl")n=Math.round(m+parseFloat(d.width()));else n=Math.round(m-parseFloat(d.width()));k=a(".wijmo-wijmenu-footer",d);l=function(h,f){var i=h,c=a(".wijmo-wijmenu-current",d),e,g;if(c.get(0)===b._getSublist().get(0))return;if(f){e=f._getSublist();g=f}else{e=c.parents("ul:eq(0)");g=a.wijmo.wijmenu._getItemWidget(c.parent())._getParentOrMenu()}c.hide().attr("aria-expanded","false");b._resetDrillChildMenu(c);b._resetScroll(g);e.addClass("wijmo-wijmenu-current").attr("aria-expanded","true");if(e.hasClass("wijmo-wijmenu-content")){i.remove();k.hide()}};b._resetDrillChildMenu(q);b._resetScroll(g);b._slidingAnimation(e,n,function(){b._trigger("shown",j,g);b.activate(j,u||g);b.select(j)});p.show().addClass("wijmo-wijmenu-current").attr("aria-expanded","true");if(c.backLink){if(k.find("a").size()===0){k.show();b._backLink=a('<a href="#"><span class="ui-icon ui-icon-triangle-1-w"></span> <span>'+c.backLinkText+"</span></a>").appendTo(k).click(function(f,h){if(b._getDisabled())return;var g=b._getCurrentItemInSliding(),j=a(this),c;if(!b._trigger("hidding",f,g))return;e.stop(true,true);if(i==="rtl")c=Math.round(e.css("left").replace("px",""))-Math.round(d.width());else{c=Math.round(e.css("left").replace("px",""))+Math.round(d.width());if(c>m)return}b._slidingAnimation(e,c,function(){b._trigger("hidden",f,g);l(j);h&&h()});f.preventDefault()})}}else{if(f.find("li").size()===1){f.empty().append(h);h.find("a").click(function(d,c){var g=a(this).parent(),e=b._getCurrentItemInSliding();b._slidingMenu(d,g,e,null,function(a){if(!a)b._resetDrilldownMenu(f,c);else{l(null,a);c&&c()}});d.preventDefault()})}a(".wijmo-wijmenu-current-crumb",d).removeClass("wijmo-wijmenu-current-crumb");s=g._getLink().text();o=a('<li class="wijmo-wijmenu-current-crumb"><a href="#" class="wijmo-wijmenu-crumb">'+s+"</a></li>");o.appendTo(f).find("a").click(function(f,e){if(b._getDisabled())return;var d=a(this).parent(),c;if(!d.is(".wijmo-wijmenu-current-crumb")){c=b._getCurrentItemInSliding();b._slidingMenu(f,d,c,g,function(a){l(null,a);e&&e()})}f.preventDefault()});o.prev().append(' <span class="ui-icon ui-icon-carat-1-e"></span>')}a(this).attr("href")==="#"&&j.preventDefault()})},_slidingMenu:function(k,i,h,n,f){var a=this,q=a._getSublist(),p=a.options.direction,o=a.domObject.menucontainer,m=o.width(),e=i.parent().children().length-1,j,c,d,b,l=function(c,d,b){j=(p==="rtl"?1:-1)*d*m;a._slidingAnimation(q,j,function(){b&&b(c)})},g=function(c,d){var f;if(c!==d){f=a._trigger("hidding",k,c);if(f){e--;b&&b();b=function(){a._trigger("hidden",k,c)};return g(c.getParent(),d)}}return c};c=g(h,n);if(c!==h){l(c,e,function(){b&&b();f&&f(c)});d=i.parent().children().eq(e);d.addClass("wijmo-wijmenu-current-crumb").find("span").remove();d.nextAll().remove()}},_getCurrentItemInSliding:function(){var d=this,c=d.domObject.menucontainer,e=a(".wijmo-wijmenu-current",c),b=a.wijmo.wijmenu._getItemWidget(e.parent());return b},_leafNodeClick:function(b,c,e){var a=this,f=a.options,d;a.activate(b,c);a.select(b);if(f.trigger){d=a._getTriggerEle();if(d.length){a._hideMenu(b);a._resetDrilldownMenu(e)}}c._getLink().attr("href")==="#"&&b.preventDefault()},_slidingAnimation:function(d,c,b){var a=this.options.slidingAnimation;if(a&&!a.disabled)d.stop(true,true).animate({left:c},a.duration,a.easing,b);else{d.css("left",c);b.call(this)}},_killDrilldown:function(){var c=this._getSublist(),b=this.domObject,d={width:"",height:""};c.css(d).removeClass("ui-widget-content");if(b.scrollcontainer&&b.scrollcontainer.parent().length>0){b.scrollcontainer.css(d);b.scrollcontainer.wijsuperpanel("destroy");b.scrollcontainer.removeClass("wijmo-wijsuperpanel").append(c)}c.prevAll().remove();b.menucontainer.removeClass("wijmo-wijmenu-ipod wijmo-wijmenu-container");a(".wijmo-wijmenu-current",b.menucontainer).removeClass("wijmo-wijmenu-current");a(".wijmo-wijmenu-breadcrumb",b.menucontainer).remove();c.undelegate("li>.wijmo-wijmenu-link","click");a("ul",c).css({left:"",width:""});c.css("left","");b.scrollcontainer=b.menucontainer.children(":first")},_displayMenu:function(e){var b=this,d=b.options,f,h,g,c=b.domObject.menucontainer,j=a(e.target),i=!a.wijmo.wijmenu._hasVisibleSubMenus(b);if(c.is(":visible")||i)return;if(!b._trigger("showing",e,b))return;c.show();b._setPosition(j);b.nowIndex++;b._setZindex(c,b.nowIndex);c.hide();f={context:c,show:true};h=d.direction==="rtl"?"right":"left";g=a.extend({},{option:{direction:h}},d.animation,d.showAnimation);a.wijmo.wijmenu._animateFlyoutMenu(g,f,function(){b._trigger("shown",e,b)});b._isClickToOpen=d.triggerEvent==="click";this.element.data("shown",true)},_hideMenu:function(d){var b=this,g=b.options,c=this.domObject.menucontainer,h=a.wijmo.wijmenu.animations,e,f;if(!this.element.data("shown"))return;if(!b._trigger("hidding",d,b))return;this.element.data("shown",false);if(a.fn.wijhide){e={context:c,show:false};f=a.extend({},g.animation,g.hideAnimation);c.wijhide(f,h,e,null,function(){b._setZindex(c);c.attr("aria-hidden",true);b._trigger("hidden",d,b)})}else{c.hide().attr("aria-hidden",true);b._setZindex(c);b._trigger("hidden",d,b)}},_setZindex:function(c,d){var e=this.domObject,b;if(!e)return;b=e.menucontainer;if(c.get(0)===b.get(0)){if(d)b.css("z-index",d);else b.css("z-index","");return}if(d){c.parent().css("z-index",999);c.css("z-index",d);a.browser.msie&&a.browser.version<8&&b.css("z-index")===0&&b.css("z-index",9950)}else{c.css("z-index","");c.parent().css("z-index","");a.browser.msie&&a.browser.version<8&&a("ul:visible",this._getSublist()).length===0&&b.css("z-index")===9950&&b.css("z-index","")}},_setPosition:function(c){var d=this._getPosition(),e={of:c},b=this.domObject.menucontainer;b.css({left:"0",top:"0",position:"absolute"});b.position(a.extend(e,d))},_getPosition:function(){var c=this.options,d=c.direction,b=d==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"};b=a.extend(b,c.position);return b},_getFirstSelectableSubItem:function(){return a.wijmo.wijmenu._getFirstSelectableSubItem(this)},_getLastSelectableSubItem:function(){return a.wijmo.wijmenu._getLastSelectableSubItem(this)},add:function(b,c){a.wijmo.wijmenu._add(this,b,c)},_getSublist:function(){return this._rootMenu},getItems:function(){return this._items},remove:function(b){a.wijmo.wijmenu._remove(this,b)},_newId:function(){for(var c=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],a="",b=0;b<16;b++)a+=c[Math.round(Math.random()*25)];return a}});a.widget("wijmo.wijmenuitem",{options:{header:false,separator:false,value:"",text:"",navigateUrl:"",target:"",iconClass:"",imagePosition:"",displayVisible:true,selected:false,items:null},_initState:function(){this._items=[];this._resetMarkupValue();if(!this.options.items)this.options.items=[]},_create:function(){var b=this;b.element.data("wijmomenuitem",b.widgetName);b._initState();b._getOrSetOptionsValues();b._createChildMenuItems();b._initCssClass();a.Widget.prototype._create.apply(b,arguments)},_refresh:function(){var a=this,b=a.options;a._set_navigateUrl(b.navigateUrl);a._set_target(b.target);a._set_displayVisible(b.displayVisible);a._createChildMenuItems();a._initCssClass()},_setOption:function(c,e){var b=this,f=b.options,d;if(c==="items"){a.Widget.prototype._setOption.apply(b,arguments);b._set_items(e);return}if(e===f[c])return;a.Widget.prototype._setOption.apply(b,arguments);if(!a.isFunction(b["_set_"+c]))return;b["_set_"+c](e,true);switch(c){case"header":case"separator":b._refresh();break;case"displayVisible":d=b.getParent();d&&d._setSubmenuIcon()}},index:function(){return this.element.index()},_set_selected:function(c){var a=this,b=a._getMenuItemType();if(b===a._markupType.link)a._getLink().toggleClass("ui-state-active",c);else a.options.selected=false},_set_items:function(b){var a=this;a._getSublist().remove();a._items=[];if(b.length>0){a._createChildMenuItems();a._initUlCssClass()}a._setSubmenuIcon(b.length>0);a._bindModeEvents(a,true);a._resetMarkupValue()},_bindModeEvents:function(b,c){var a=this,d=b._getMenu(),e=d.options;if(c){a._initUlCssClass();a._setSubmenuIcon();a._resetMarkupValue()}if(e.mode==="flyout")if(c){a._killFlyout();a._flyout()}else b._flyout();else{a._setDrilldownUlStyle();b.element.parent().is(":visible")&&d._resetScroll(b._getParentOrMenu())}},_set_value:function(a){this.options.value=a},_set_text:function(b,c){var a=this,d=a.options;if(b||c)a._setText(b);else d.text=a._getText()},_set_navigateUrl:function(b,d){var c=this,e=c.options,a=c._getLink();if(a.is("a"))if(b||d)a.attr("href",b);else e.navigateUrl=a.attr("href")},_set_target:function(e,d){var b=this,c=b.options,a=b._getLink();if(a.is("a"))if(c.target||d)a.attr("target",e);else c.target=a.attr("target")||""},_set_iconClass:function(g,i){var e=this,f=e.options,d,b,c,h;if(f.header===true||f.separator===true)return;d=e._getLink();b=d.find("span.wijmenuitem-icon");if(g){if(b.length===0){b=a("<span>");c=d.children(".wijmo-wijmenu-text").wrap("<span>").parent();c.addClass("wijmo-wijmenu-text");c.prepend(b)}b.attr("class",g+" wijmo-wijmenu-icon-left wijmenuitem-icon");i&&e._set_imagePosition(f.imagePosition)}else if(b.length!==0){b.remove();c=d.children(".wijmo-wijmenu-text");h=c.text();c.html("");c.text(h)}e._getMenuItemType()===e._markupType.other&&d.addClass("wijmo-wijmenu-link ui-corner-all")},_set_imagePosition:function(c){var e=this,d=e._getLink(),a=d.find(">span>span.wijmenuitem-icon"),b=c==="right"?"right":"left";if(a.length===0)return;a.removeClass("wijmo-wijmenu-icon-right").removeClass("wijmo-wijmenu-icon-left").addClass("wijmo-wijmenu-icon-"+b)},_set_separator:function(d,i){var a=this,e=a.element,c=a.options,j=a._getLink(),f="wijmo-wijmenu",g=f+"-separator ui-state-default ui-corner-all",h="ui-widget "+b+" ui-state-default ui-corner-all";if(i&&d===false){e.html("").removeClass(g).removeClass(h);a._createMenuItemMarkup(a._markupType.link).appendTo(e)}else if(d===true||j.length===0){c.separator=true;c.header=false;a._createMenuItemMarkup(a._markupType.separator)}else c.separator=false;a._resetMarkupValue()},_set_header:function(f,i){var a=this,e=a.element,d=a.options,c=a._getLink(),h="ui-widget-header ui-corner-all",g="ui-widget "+b+" ui-state-default ui-corner-all";if(i&&f===false){d.header=false;e.html("").removeClass(h).removeClass(g);a._createMenuItemMarkup(a._markupType.link).appendTo(e)}else if(f===true||c.is("h1,h2,h3,h4,h5")){d.header=true;d.separator=false;if(!c.is("h1,h2,h3,h4,h5")){c.remove();c=a._createMenuItemMarkup(a._markupType.header);e.append(c)}}else d.header=false;a._resetMarkupValue()},_set_displayVisible:function(b){var c=this,a=c.element;if(b)a.show();else a.hide()},_markupType:{link:0,separator:1,header:2,other:3},_createMenuItemMarkup:function(d){var b=this,e=b.options,f=b.element,c;if(d===b._markupType.separator){f.html("");return null}else if(d===b._markupType.header)c=a("<h3></h3>").text(e.text);else c=a("<a>").text(e.text);return c},_getMenuItemType:function(e){var b=this,c=b.options,d=b._getLink();if(e)c=a.extend({},c,e);return c.separator===true?b._markupType.separator:c.header===true?b._markupType.header:d.length===0?c.text?b._markupType.link:b._markupType.separator:d.is("a")?b._markupType.link:d.is("h1,h2,h3,h4,h5")?b._markupType.header:b._markupType.other},_getOrSetOptionsValues:function(){var a=this,e=a.element,b=a.options,c=a._getLink(),d=a._getMenuItemType();if(d===a._markupType.header){a._set_header(b.header);a._set_text(b.text)}else if(d===a._markupType.separator)a._set_separator(b.separator);else{if(c.length===0){c=a._createMenuItemMarkup(d);e.append(c)}else a._set_text(b.text);a._resetMarkupValue();a._set_navigateUrl(b.navigateUrl);a._set_target(b.target)}a._set_displayVisible(b.displayVisible);a._set_selected(b.selected)},_getText:function(){return this._getLink().text()},_setText:function(b){var c=this.element,a;a=c.find(":not(ul)a .wijmo-wijmenu-text:first");if(a.length!==0){a.text(b);return}a=c.children("h1,h2,h3,h4,h5").filter(":first");if(a.length!==0){a.text(b);return}a=c.children("a:first");if(a.length!==0){a.text(b);return}},_createChildMenuItems:function(){var b=this,j=b.element,i=b._items,g=b.options,d,c,e,f,h;if(g.header===true||g.separator===true)return;d=g.items.length;c=b._getSublist();e=c.children("li").length;if(d>e){if(c.length===0){c=a("<ul>").appendTo(j);b._resetMarkupValue()}for(f=0;f<d-e;f++)c.append("<li>")}a.each(b._getChildren(),function(d,e){var f=a(e),c;c=a.wijmo.wijmenu._getMenuItemOptions(b.options,d);h=b._createItemWidget(f,c);i.push(h);b.options.items[d]=h.options})},_createItemWidget:function(b,d){var a=this,c=a.widgetName;b[c](d);return b.data(a.widgetName)},_initCssClass:function(){var a=this,c=this.element,h=a.options,g=a._getLink(),e="wijmo-wijmenu",i=e+"-separator ui-state-default ui-corner-all",k="ui-widget-header ui-corner-all",f="ui-widget "+b+" ui-state-default ui-corner-all",j=e+"-link ui-corner-all",d=a._getMenuItemType();d!==a._markupType.separator&&c.attr("role","menuitem");if(d===a._markupType.separator)c.addClass(i);else if(d===a._markupType.header)c.addClass(k);else{if(d===a._markupType.link){if(!c.hasClass(b)){c.addClass(f);g.addClass(j);g.wrapInner("<span>").children("span").addClass(e+"-text")}}else c.addClass(f);a._setSubmenuIcon()}a._set_iconClass(h.iconClass);a._set_imagePosition(h.imagePosition);a._initUlCssClass()},_initUlCssClass:function(){var a="wijmo-wijmenu";this._getSublist().addClass(a+"-list ui-widget-content ui-corner-all ui-helper-clearfix "+a+"-child ui-helper-reset").hide()},_setSubmenuIcon:function(e){var d=this,c=d._getLink(),g=d._getMenu(),f=g.options.direction,b=f==="rtl"?c.children("span.ui-icon:first"):c.children("span.ui-icon:last");if(e===undefined)e=a.wijmo.wijmenu._hasVisibleSubMenus(d);if(e&&!c.is(":input")){if(b.length===0)if(f==="rtl")b=a("<span>").prependTo(c);else b=a("<span>").appendTo(c);if(d._isRoot()&&g.options.orientation==="horizontal"&&g.options.mode==="flyout")b.attr("class","ui-icon ui-icon-triangle-1-s");else if(f==="rtl")b.attr("class","ui-icon ui-icon-triangle-1-w");else b.attr("class","ui-icon ui-icon-triangle-1-e")}else b.remove()},_killFlyout:function(){var b=this.element.attr("role","");b.removeClass("wijmo-wijmenu-parent").unbind(".wijmenuEvent").unbind(".wijmenuitem").children(":first").unbind(".wijmenuEvent").unbind(".wijmenuitem").attr("aria-haspopup","");this._getSublist().unbind(".wijmenuEvent").unbind(".wijmenuitem");a.each(this.getItems(),function(){this._killFlyout()})},_getItemTriggerEvent:function(){var d=this,e=d.element,f=d._getMenu(),b=f.options,c="default";if(b.trigger!=="")if(e.is(b.trigger)||f.element.is(b.trigger))c=b.triggerEvent;else{e.parents(".wijmo-wijmenu-parent").each(function(e,d){if(a(d).is(b.trigger)){c=b.triggerEvent;return false}});if(c==="default"&&d._isOuterTirggerEle())c=b.triggerEvent}e.data("triggerEvent",c);return c},_isOuterTirggerEle:function(){var b=this._getMenu();return a.wijmo.wijmenu._getOuterElement(b.options.trigger,".wijmo-wijmenu").length>0},_flyout:function(){var b=this,e=b._getMenu(),n="wijmo-wijmenu-link",k="wijmo-wijmenu-parent",c=e.options,f=".wijmenuitem",j=a(b.element).attr("aria-haspopup",true),l,i,m=b._getItemTriggerEvent(),d=j.children("a."+n),g=b._getSublist(),h;if(b.getItems().length>0){g.bind("mouseleave"+f,function(a){if(c.disabled)return;i=setTimeout(function(){b._hideCurrentSubmenu(a)},c.hideDelay)});j.removeClass(k).addClass(k);if(m!=="default"&&c.triggerEvent!=="mouseenter"){switch(c.triggerEvent){case"click":d.bind("click"+f,function(d){if(c.disabled||a(this).hasClass("ui-state-disabled"))return;b._showFlyoutSubmenu(d)});break;case"dblclick":d.bind("dblclick"+f,function(d){if(c.disabled||a(this).hasClass("ui-state-disabled"))return;b._showFlyoutSubmenu(d)});break;case"rtclick":d.bind("contextmenu"+f,function(d){if(c.disabled||a(this).hasClass("ui-state-disabled"))return;b._showFlyoutSubmenu(d);d.preventDefault()})}g.data("notClose",true)}else{d.bind("mouseenter.wijmenuEvent",function(d){if(c.disabled||a(this).hasClass("ui-state-disabled"))return;clearTimeout(i);l=setTimeout(function(){b._displaySubmenu(d)},c.showDelay)}).bind("mouseleave"+f,function(d){if(c.disabled||a(this).hasClass("ui-state-disabled"))return;clearTimeout(l);if(!g.is("ul"))g=g.children("ul:first");i=setTimeout(function(){b._hideSubmenu(false,d)},c.hideDelay)});b.getItems().length>0&&b._getSublist().bind("mouseenter"+f,function(){if(c.disabled)return;clearTimeout(i)})}}d.bind("click.wijmenuEvent",function(a){h=d.hasClass("ui-state-disabled");if(c.disabled||h)return;if(d.is("a")){if(b._getSublist().length===0)e._hideAllMenus(a);else if(!(c.trigger!==""&&j.data("triggerEvent")!=="default"&&c.triggerEvent!=="mouseenter"))e._hideAllMenus(a);else{var g=e._currentMenuList,i,f;if(g!==undefined){i=j;if(b._getSublist().length===0)for(f=g.length;f>0;f--)if(g[f-1]===b)break;else g[f-1]._hideSubmenu(false,a)}}e.activate(a,b)}e.select(a);d.attr("href")==="#"&&a.preventDefault()}).bind("focusin.wijmenuEvent",function(a){h=d.hasClass("ui-state-disabled");if(c.disabled||h)return;d.is("a")&&e.activate(a,b)});a.each(b.getItems(),function(){this._flyout()})},_hideSubmenu:function(k,g){var c=this,b=c._getMenu(),j=b.options,l=a.wijmo.wijmenu.animations,h,i,e,d=c._getSublist(),f=c._getLink();if(!f.data("subMenuOpened"))return;if(!b._trigger("hidding",g,c))return;if(f.is(".wijmo-wijmenu-link")){f.data("subMenuOpened",false);f.removeClass("ui-state-active")}if(a.fn.wijhide&&k!==true){h={context:d,show:false};i=a.extend({},j.animation,j.hideAnimation);d.wijhide(i,l,h,null,function(){b._setZindex(d);d.attr("aria-hidden",true);b._trigger("hidden",g,c)})}else{d.hide().attr("aria-hidden",true);b._setZindex(d);b._trigger("hidden",g,c)}e=b._currentMenuList;if(e){e=a.map(e,function(a){return a&&a===c?null:a});b._currentMenuList=a.makeArray(e)}},_displaySubmenu:function(g,k){var c=this,b=c._getMenu(),e=b.options,i,f,j,h,l=c._getLink(),d=c._getSublist();h=!a.wijmo.wijmenu._hasVisibleSubMenus(c);if(d.is(":visible")||h)return;if(!b._trigger("showing",g,c))return;l.is("a.wijmo-wijmenu-link")&&l.data("subMenuOpened",true);d.show();this._setMenuItemPosition();b.nowIndex++;b._setZindex(d,b.nowIndex);d.hide();i={context:d,show:true};f=e.direction==="rtl"?"right":"left";if(e.orientation==="horizontal")if(c._isRoot())f="up";j=a.extend({},{option:{direction:f}},e.animation,e.showAnimation);a.wijmo.wijmenu._animateFlyoutMenu(j,i,function(){d.is(":hidden")&&c._hideSubmenu(true,g);b._trigger("shown",g,c);k&&k()});b._isClickToOpen=e.triggerEvent==="click";if(b._currentMenuList===undefined)b._currentMenuList=[];b._currentMenuList.push(c)},_setMenuItemPosition:function(){var c=this,b=c._getSublist(),d=c._getMenuItemPosition(),e={of:this._getLink()};b.css({left:"0",top:"0",position:"absolute"});b.position(a.extend(e,d))},_getMenuItemPosition:function(){var f=this,e=this._getMenu(),c=e.options,d=c.direction,b=d==="rtl"?{my:"right top",at:"left top"}:{my:"left top",at:"right top"};if(c.orientation==="horizontal")if(f._isRoot())b=d==="rtl"?{my:"right top",at:"right bottom"}:{my:"left top",at:"left bottom"};b=a.extend(b,c.position);return b},_getChildren:function(){return this._getSublist().children("li")},_setDrilldownUlStyle:function(){var d=this,c=d._getSublist(),e=d._getMenu(),b=e.domObject.menucontainer.width();if(e.options.direction==="rtl")c.css({width:b,left:-b});else c.css({width:b,left:b});c.addClass("ui-widget-content");a.each(d.getItems(),function(b,a){a.getItems().length&&this._setDrilldownUlStyle()})},_getMenu:function(){var c=this,b=c._menu,a,d;if(!b){a=c.element.parent();while(!a.is("body")&&a.length>0){d=a.data("wijmomenu");if(d){b=a.data(d);c._menu=b;return b}a=a.parent()}throw"An menuitem must be a child of menu";}return b},getParent:function(){var c=this,f=c.element,e,b,d;b=c._parent;if(b!==undefined)return b;d=f.parents("li:first");if(d.length>0){b=a.wijmo.wijmenu._getItemWidget(d);if(b!==undefined){c._parent=b;return b}}e=c._getMenu();if(e._getSublist().get(0)===f.parent().get(0)){c._parent=null;return null}throw"An menuitem must be a child of menu or another menuitem";},_getParentOrMenu:function(){return this.getParent()||this._getMenu()},_getField:function(a){return this.element.data(a)},_setField:function(b,a){return this.element.data(b,a)},_innerDestroy:function(g){var c=this,a=c.element,d,f=c.getItems(),e=f.length-1;a.removeClass("ui-widget "+b+" ui-state-default ui-corner-all wijmo-wijmenu-parent ui-widget-header wijmo-wijmenu-separator");d=a.children(".wijmo-wijmenu-link");d.removeClass("wijmo-wijmenu-link ui-corner-all ui-state-focus ui-state-hover ui-state-active").html(d.children(".wijmo-wijmenu-text").html()).unbind(".wijmenuitem").unbind(".wijmenuEvent");a.children("ul").removeClass("wijmo-wijmenu-list ui-widget-content ui-corner-all ui-helper-clearfix wijmo-wijmenu-child ui-helper-reset").attr("role","").attr("aria-activedescendant","").show().css({left:"",top:"",position:""}).attr("hidden","");a.removeAttr("role");d.removeAttr("aria-haspopup");!g&&c._removeFromParentCollection();a.removeData("menu").removeData("parent");for(;e>=0;e--)f[e].destroy(true);c._items.length=0;c._resetMarkupValue()},destroy:function(c){var b=this;b._innerDestroy(c);a.Widget.prototype.destroy.apply(b)},_getFirstSelectableSubItem:function(){return a.wijmo.wijmenu._getFirstSelectableSubItem(this)},_getLastSelectableSubItem:function(){return a.wijmo.wijmenu._getLastSelectableSubItem(this)},next:function(){var f=this,c=f._getParentOrMenu().getItems(),b,d,e=a.inArray(f,c);if(e===-1)throw"cannot find item from the parent collection";for(b=e+1;b<c.length;b++){d=c[b].options;if(d.displayVisible!==false&&!d.header&&!d.separator)return c[b].element}return null},previous:function(){var f=this,d=f._getParentOrMenu().getItems(),b,c,e=a.inArray(f,d);if(e===-1)throw"cannot find item from the parent collection";for(b=e-1;b>=0;b--){c=d[b].options;if(c.displayVisible!==false&&!c.header&&!c.separator)return d[b].element}return null},_removeFromParentCollection:function(){var d=this,b,e=false,c;b=d.getParent();if(b===null){b=d._getMenu();e=true}c=a.inArray(d,b.getItems());if(c===-1)return;a.wijmo.wijmenu._changeCollection(c,b.getItems(),b.options.items);if(b.getItems().length===0){if(!e){b._setSubmenuIcon(false);b._resetMarkupValue()}b.element.children("ul").remove()}},_resetMarkupValue:function(){this._sublist=null;this._link=null},_hideCurrentSubmenu:function(d){var b=this,c=b._getSublist();if(c.length===0)return;!c.data("notClose")&&b._hideSubmenu(false,d);a.each(b.getItems(),function(){this._hideCurrentSubmenu(d)})},_showFlyoutSubmenu:function(d,e){var c=this,f=this._getMenu(),b=f._currentMenuList,a;if(b!==undefined)for(a=b.length;a>0;a--)if(b[a-1]===c.getParent())break;else b[a-1]._hideSubmenu(false,d);c._displaySubmenu(d,e)},getItems:function(){return this._items},_getSublist:function(){var a=this;if(!a._sublist)a._sublist=this.element.children("ul:first");return a._sublist},_getLink:function(){var a=this;if(!a._link)a._link=this.element.children(":first");return a._link},_isRoot:function(){return this.getParent()===null},add:function(b,c){a.wijmo.wijmenu._add(this,b,c)},remove:function(b){a.wijmo.wijmenu._remove(this,b)}});a.extend(a.wijmo.wijmenu,{animations:{slide:function(b,c){b=a.extend({duration:400,easing:"swing"},b,c);if(b.show)b.context.stop(true,true).animate({height:"show"},b).attr("aria-hidden",false);else b.context.stop(true,true).animate({height:"hide"},b).attr("aria-hidden",true)}},_animateFlyoutMenu:function(e,c,d){var b=c.context;if(a.fn.wijshow){b.data("isAnimated",true);b.wijshow(e,a.wijmo.wijmenuanimations,c,null,function(){b.data("isAnimated",false);var c=a.browser;if(c.msie&&c.version==="9.0"){b.wrap("<div></div>");b.unwrap()}else c.msie&&c.version==="6.0"&&b.css("overflow","");b.attr("aria-hidden",false);d&&d()})}else b.show().attr("aria-hidden",false)},_getMenuItemOptions:function(b,c){return!b?{}:!b.items||!a.isArray(b.items)?{}:c>=b.items.length?{}:b.items[c]},_getOuterElement:function(c,b){return a(c).filter(function(){return a(this).closest(b).length===0})},_hasVisibleSubMenus:function(a){var b,c,d;if(a.jquery){if(a.data("wijmomenu"))b=a.data(a.data("wijmomenu"));else if(a.data("wijmomenuitem"))b=a.data(a.data("wijmomenuitem"))}else b=a;if(!b)throw"the arugment 'menuItem' must be an wijmenu or wijmenuitem";c=b.getItems();if(!c.length)return false;for(d=0;d<c.length;d++)if(c[d].options.displayVisible)return true;return false},_getFirstSelectableSubItem:function(d){for(var c=d.getItems(),b,a=0;a<c.length;a++){b=c[a].options;if(b.displayVisible!==false&&!b.header&&!b.separator)return c[a]}return null},_getLastSelectableSubItem:function(d){for(var c=d.getItems(),b,a=c.length-1;a>=0;a--){b=c[a].options;if(b.displayVisible!==false&&!b.header&&!b.separator)return c[a]}return null},_getSelectableSubItems:function(c,b){return a.grep(c.getItems(),function(c,d){var a=c.options;return a.header||a.separator||a.displayVisible===false?false:b(c,d)})},_add:function(b,e,c){var d=null,i=a("<li></li>"),g=b._getSublist(),f=b.getItems(),j,k,h=false;if(typeof e==="string")/<(h[1-5]|a)[\s\S]*>[\s\S]*<\/\1>/.test(e)&&i.append(e);else if(a.isPlainObject(e))k=jQuery.extend(true,{},e);if(!g||g.length<=0){g=a("<ul></ul>");b.element.append(g);h=true}if(!c||isNaN(c)||c>f.length)if(c!==0)c=f.length;if(f.length>0&&f.length!==c){j=f[c].element;i.insertBefore(j)}else g.append(i);d=b._createItemWidget(i,k);if(d===null||d===undefined)return;a.wijmo.wijmenu._changeCollection(c,b.getItems(),b.options.items,d);if(b._bindModeEvents)b._bindModeEvents(d,h);else d._bindModeEvents(d,h);h&&b._initUlCssClass()},_changeCollection:function(a,c,d,b){if(!b){c.splice(a,1);d.splice(a,1);return}c.splice(a,0,b);d.splice(a,0,b.options)},_remove:function(c,b){var a=c.getItems()[b];a&&a.element&&a.element.remove()},_getItemWidget:function(a){return a.data(a.data("wijmomenuitem"))}})})(jQuery);